<idea-plugin>
    <id>nl.akiar.pascal-support</id>
    <name>Delphi Pascal Support</name>
    <version>1.2.0</version>
    <vendor>Akiar</vendor>

    <description><![CDATA[
    Provides syntax highlighting and code folding support for Delphi/Object Pascal and Delphi Form (DFM) files.

    <b>Object Pascal Support (.pas, .dpr, .dpk):</b>
    - Full syntax highlighting for Delphi/Object Pascal
    - All Pascal keywords and operators highlighted
    - Compiler directive highlighting ({$...})
    - Code folding for begin..end, class, record, try..except/finally, case, repeat..until
    - Code folding for interface/implementation sections
    - Customizable colors via Settings

    <b>DFM Support (.dfm):</b>
    - Syntax highlighting for keywords, properties, object names, class names
    - String, number, and boolean literal highlighting
    - Comment highlighting (// and {...} and (*...*))
    - Code folding for object...end and item...end blocks
    - Customizable colors via Settings
    ]]></description>

    <change-notes><![CDATA[
    Version 1.2.0:
    - Added semantic highlighting for Pascal type definitions
    - Classes, records, and interfaces get distinct colors
    - Added stub indexing for type definitions (POC)

    Version 1.1.0:
    - Added Object Pascal language support (.pas, .dpr, .dpk)
    - Full Pascal syntax highlighting with 80+ keywords
    - Pascal code folding for all block types
    - Compiler directive highlighting
    - Pascal Color Settings Page

    Version 1.0.5:
    - Added property name highlighting (left side of = assignments)
    - Added boolean highlighting (True/False)
    - Object references after = now highlighted as object names

    Version 1.0.4:
    - Added distinct highlighting for object names and class/type names
    - Added code folding for item...end blocks

    Version 1.0.3:
    - Added Color Settings Page for customizing syntax highlighting colors
    - Rewrote lexer for improved stability

    Version 1.0.2:
    - Fixed lexer adapter causing "discontinuous token sequence" errors
    - Fixed folding builder creating out-of-range fold regions

    Version 1.0.1:
    - Bug fixes

    Version 1.0.0:
    - Initial release with DFM support
    ]]></change-notes>

    <!-- IntelliJ Platform compatibility -->
    <idea-version since-build="243.0"/>

    <!-- Plugin dependencies -->
    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- ==================== DFM Support ==================== -->

        <!-- DFM File Type -->
        <fileType name="Delphi Form" implementationClass="nl.akiar.pascal.dfm.DfmFileType"
                  fieldName="INSTANCE" language="DFM" extensions="dfm"/>

        <!-- DFM Parser Definition -->
        <lang.parserDefinition language="DFM"
                               implementationClass="nl.akiar.pascal.dfm.DfmParserDefinition"/>

        <!-- DFM Syntax Highlighter -->
        <lang.syntaxHighlighterFactory language="DFM"
                                       implementationClass="nl.akiar.pascal.dfm.DfmSyntaxHighlighterFactory"/>

        <!-- DFM Code Folding -->
        <lang.foldingBuilder language="DFM"
                            implementationClass="nl.akiar.pascal.dfm.DfmFoldingBuilder"/>

        <!-- DFM Color Settings Page -->
        <colorSettingsPage implementationClass="nl.akiar.pascal.dfm.DfmColorSettingsPage"/>

        <!-- ==================== Pascal Support ==================== -->

        <!-- Pascal File Type -->
        <fileType name="Object Pascal" implementationClass="nl.akiar.pascal.PascalFileType"
                  fieldName="INSTANCE" language="ObjectPascal" extensions="pas;dpr;dpk"/>

        <!-- Pascal Parser Definition -->
        <lang.parserDefinition language="ObjectPascal"
                               implementationClass="nl.akiar.pascal.PascalParserDefinition"/>

        <!-- Pascal Syntax Highlighter -->
        <lang.syntaxHighlighterFactory language="ObjectPascal"
                                       implementationClass="nl.akiar.pascal.PascalSyntaxHighlighterFactory"/>

        <!-- Pascal Code Folding -->
        <lang.foldingBuilder language="ObjectPascal"
                            implementationClass="nl.akiar.pascal.PascalFoldingBuilder"/>

        <!-- Pascal Color Settings Page -->
        <colorSettingsPage implementationClass="nl.akiar.pascal.PascalColorSettingsPage"/>

        <!-- Pascal Stub Index for type definitions -->
        <stubIndex implementation="nl.akiar.pascal.stubs.PascalTypeIndex"/>

        <!-- Pascal Stub Element Types Holder -->
        <stubElementTypeHolder class="nl.akiar.pascal.psi.PascalElementTypes"/>

        <!-- Pascal Semantic Annotator for type coloring -->
        <annotator language="ObjectPascal"
                   implementationClass="nl.akiar.pascal.annotator.PascalSemanticAnnotator"/>

        <!-- DPR Project Service for monorepo support -->
        <projectService serviceImplementation="nl.akiar.pascal.dpr.DprProjectService"/>

        <!-- DPR Library Roots Provider - indexes files referenced by .dpr files -->
        <additionalLibraryRootsProvider implementation="nl.akiar.pascal.dpr.DprLibraryRootsProvider"/>

        <!-- Pascal Source Paths Settings Service -->
        <projectService serviceImplementation="nl.akiar.pascal.settings.PascalSourcePathsSettings"/>

        <!-- Pascal Source Paths Settings Page -->
        <projectConfigurable
            id="pascal.sourcePaths"
            parentId="language"
            displayName="Pascal Source Paths"
            instance="nl.akiar.pascal.settings.PascalSourcePathsConfigurable"/>
    </extensions>
</idea-plugin>
